Docker состоит из трех проектов:

- `docker-cli`: утилита командной строки, с которой вы взаимодействуете с помощью команды docker.
- `containerd`: Linux Daemon, который управляет контейнерами и запускает их. Он загружает образы из репозитория, управляет хранилищем и сетью, а также контролирует работу контейнеров.
- `runc`: низкоуровневая среда выполнения контейнеров, которая создает и запускает контейнеры.

### Благодаря каким механизмам работает Docker

Как вы уже знаете, в ядре Linux из коробки есть все необходимые механизмы для создания контейнеров:

- capabilities - позволяет выдать процессу часть расширенных прав, которые доступны только root. Например, разрешить удалять чужие файлы, завершать другие процессы (команда kill) или изменять атрибуты у файлов (команда chown);
- namespace - это абстракция в Linux, с помощью которой можно создавать своё изолированное окружение в ОС. То есть такую коробочку, в которой свои пользователи, своя сеть, свои процессы и всё остальное. При этом изменения в namespace видны только членам этого namespace. Есть шесть типов пространств имён (namespaces): IPC, Network, Mount, PID, User, UTS.

Например:

- Network namespace отвечает за ресурсы, связанные с сетью. У каждого namespace будут свои сетевые интерфейсы, свои таблицы маршрутизации.
- User namespace специализируется на пользователях и группах в рамках namespace.
- PID namespace заведует набором ID процессов. Первый процесс, созданный в новом namespace, имеет PID = 1, а дочерним процессам назначаются следующие PID.
- cgroup объединяет несколько процессов в группу и управляет ресурсами для этой группы.
